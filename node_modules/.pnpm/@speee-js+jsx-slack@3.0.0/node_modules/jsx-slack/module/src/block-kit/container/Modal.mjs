import{JSXSlack as p}from"../../jsx.mjs";import{createComponent as k,cleanMeta as M,createElementInternal as g}from"../../jsx-internals.mjs";import{plainText as a}from"../composition/utils.mjs";import{Select as h}from"../elements/Select.mjs";import{Textarea as x}from"../input/Textarea.mjs";import{Divider as C}from"../layout/Divider.mjs";import{Header as _}from"../layout/Header.mjs";import{Image as S}from"../layout/Image.mjs";import{Input as f,knownInputs as I}from"../layout/Input.mjs";import{Section as O}from"../layout/Section.mjs";import{Video as V}from"../layout/Video.mjs";import{generateBlocksContainer as T,generateActionsValidator as j,generateSectionValidator as A}from"./utils.mjs";const B=T({name:"Modal",availableBlockTypes:{actions:j(),context:!0,divider:!0,header:!0,image:!0,input:!0,section:A(),video:!0},aliases:{header:_,hr:C,img:S,input:f,section:O,select:h,textarea:x,video:V},typesToCheckMissingLabel:I}),D=a("Submit"),E=k("Modal",t=>{let l=!1,r,e;const u=p.Children.toArray(t.children).reduce((n,o)=>{if(p.isValidElement(o)){const{type:d,props:i}=o.$$jsxslack;if(d===f||d==="input"){if(i.type==="hidden")return e=e||{},e[i.name]=i.value,n;if(i.type==="submit")return r=a(i.value),n;l=!0}}return typeof o=="object"?(o.type==="input"&&(l=!0),[...n,o]):n},[]);!r&&l&&(r=D);const v=(()=>typeof t.privateMetadata=="string"?t.privateMetadata:typeof t.privateMetadata=="function"?t.privateMetadata(e):e&&JSON.stringify(e))(),m=t.type||"modal",y={title:a(t.title||""),submit:t.submit?a(t.submit):r,close:t.close?a(t.close):void 0,clear_on_close:t.clearOnClose!==void 0?!!t.clearOnClose:void 0,notify_on_close:t.notifyOnClose!==void 0?!!t.notifyOnClose:void 0,external_id:t.externalId},b={submit_disabled:t.submit!==void 0?!t.submit:void 0},s={callback_id:t.callbackId,private_metadata:v},c=M(g(B,{children:u}));return m==="modal"?{type:m,...s,...y,blocks:c}:{type:m,...s,...b,blocks:c}});export{E as Modal};
